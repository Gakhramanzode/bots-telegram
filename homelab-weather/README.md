# Cloudy with a Chance - Homelab Weather Bot üå¶Ô∏è

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ –º—ã —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç—É—é –ø–æ–≥–æ–¥–Ω—É—é —Å—Ç–∞–Ω—Ü–∏—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∏–∫—Ä–æ–∫–æ–º–ø—å—é—Ç–µ—Ä–∞ Raspberry Pi Zero 2 W –∏ –¥–∞—Ç—á–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –¥–∞–≤–ª–µ–Ω–∏—è –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ GY-BME280. –ê –µ—â—ë —ç—Ç–æ—Ç –±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ —á–µ—Ä–µ–∑ Telegram!

## –°—Ö–µ–º–∞
![image](https://github.com/user-attachments/assets/fbb7e4a2-3975-4c89-a073-35c688832c7f)

## –ß—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è?

1.	–ú–∏–∫—Ä–æ–∫–æ–º–ø—å—é—Ç–µ—Ä Raspberry Pi Zero 2 W (–∏–ª–∏ –¥—Ä—É–≥–æ–π Raspberry Pi —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Wi-Fi).
2.	–î–∞—Ç—á–∏–∫ GY-BME280 (–¥–∞—Ç—á–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –¥–∞–≤–ª–µ–Ω–∏—è –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏).
3.	–°–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–æ–¥–∞ Dupont –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∞—Ç—á–∏–∫–∞ –∫ Raspberry Pi.
4.	–ö–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ microSD (–∫–ª–∞—Å—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ U1 –∏–ª–∏ –≤—ã—à–µ) —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π Raspberry Pi OS.
5.	–ê–∫–∫–∞—É–Ω—Ç –≤ Telegram –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞.

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∞ –∫ Raspberry Pi

1.	–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –¥–∞—Ç—á–∏–∫ BME280 –∫ Raspberry Pi —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ–≤–æ–¥–æ–≤ Dupont:
- VCC –Ω–∞ –¥–∞—Ç—á–∏–∫–µ –∫ 3.3V –Ω–∞ Raspberry Pi (–ù–ï –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ –∫ 5V).
- GND –Ω–∞ –¥–∞—Ç—á–∏–∫–µ –∫ GND –Ω–∞ Raspberry Pi.
- SCL –Ω–∞ –¥–∞—Ç—á–∏–∫–µ –∫ GPIO 3 (SCL) –Ω–∞ Raspberry Pi.
- SDA –Ω–∞ –¥–∞—Ç—á–∏–∫–µ –∫ GPIO 2 (SDA) –Ω–∞ Raspberry Pi.

> [!TIP]
> –ú–Ω–µ –ø–æ–º–æ–≥ –≤–æ—Ç —ç—Ç–æ—Ç —Å–∞–π—Ç https://pinouts.vercel.app/board/raspberry-pi-zero-2-w

2.	–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:
```bash
i2cdetect -y 1
```
–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `0x76` –≤ –≤—ã–≤–æ–¥–µ, –∑–Ω–∞—á–∏—Ç, –¥–∞—Ç—á–∏–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∏–º–µ—Ä:
```bash
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:                         -- -- -- -- -- -- -- --
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
70: -- -- -- -- -- -- 76 --
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–û –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–¥–∞

1.	–°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ `requirements.txt`.
2.	–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram –±–æ—Ç–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `TELEGRAM_BOT_TOKEN`.

–®–∞–≥ 2: –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞

1.	–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
sudo docker build -t weather-bot:v0.0.1 .
```
–®–∞–≥ 3: –ó–∞–ø—É—Å–∫ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

1.	–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:
```bash
sudo docker run -d --name weather-bot-container --device /dev/i2c-1 -e TELEGRAM_BOT_TOKEN=—Ç–æ–∫–µ–Ω -e PUSHGATEWAY_URL=<>IP:<–ø–æ—Ä—Ç>  weather-bot:v0.0.1
```
–¢–µ–ø–µ—Ä—å –±–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –û–Ω —Å–º–æ–∂–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É `/weather`, –ø–æ–∫–∞–∑—ã–≤–∞—è —Ç–µ–∫—É—â—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É, –¥–∞–≤–ª–µ–Ω–∏–µ –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç—å –≤ –≤–∞—à–µ–π –∫–æ–º–Ω–∞—Ç–µ.

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

-	`/start` ‚Äî –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, —á—Ç–æ –±–æ—Ç –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å.
-	`/weather` ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É, –¥–∞–≤–ª–µ–Ω–∏–µ –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç—å.

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker –∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è Python –∏–∑ `requirements.txt`.
- –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –∑–∞–≥–ª—è–Ω–∏—Ç–µ –≤ –∫–æ–¥ –±–æ—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ —É–∂–µ –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ–≥–æ–¥—É —Å –ø–æ–º–æ—â—å—é –≤–∞—à–µ–≥–æ Telegram –±–æ—Ç–∞ ‚ÄúCloudy with a Chance‚Äù!
<img width="457" alt="image" src="https://github.com/user-attachments/assets/5424ca50-a3e7-40e2-87b7-c5649846f1d5">

–ï—â–µ —Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–∏ –¥–∞—à–±–æ—Ä–¥—ã –≤ Grafana –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–ª–µ—Ä—Ç—ã:
![image](https://github.com/user-attachments/assets/b0544656-7bff-46ef-9566-0ace65647c95)
